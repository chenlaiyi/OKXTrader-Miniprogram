<!--pages/history-detail/history-detail.wxml-->
<view class="container">
  <!-- å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="goBack">
      <text class="nav-icon">â€¹</text>
      <text class="nav-title">åˆ†æè¯¦æƒ…</text>
    </view>
    <view class="nav-right">
      <text class="nav-btn" bindtap="copyContent">å¤åˆ¶</text>
    </view>
  </view>

  <!-- æ»šåŠ¨å†…å®¹ -->
  <scroll-view class="content-scroll" scroll-y>
    <!-- ä¿¡å·å¡ç‰‡ -->
    <view class="signal-card">
      <view class="signal-header">
        <text class="signal-label">äº¤æ˜“ä¿¡å·</text>
        <view class="signal-badge {{signalClass}}">
          <text class="signal-badge-text">{{signalText}}</text>
        </view>
      </view>
      <view class="signal-info">
        <view class="info-row">
          <text class="info-label">å“ç§</text>
          <text class="info-value">{{symbol}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç­–ç•¥</text>
          <text class="info-value">{{strategyLabel || 'æœªçŸ¥'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç½®ä¿¡åº¦</text>
          <text class="info-value confidence-{{signalClass}}">{{confidence}}%</text>
        </view>
        <view class="info-row">
          <text class="info-label">åˆ†ææ—¶é—´</text>
          <text class="info-value">{{time}}</text>
        </view>
      </view>
    </view>

    <!-- ä»·æ ¼å»ºè®®å¡ç‰‡ -->
    <view class="price-card" wx:if="{{suggestedPrice !== '--' || stopLoss !== '--' || takeProfit !== '--'}}">
      <view class="card-title">
        <text class="title-icon">ğŸ’°</text>
        <text class="title-text">ä»·æ ¼å»ºè®®</text>
      </view>
      <view class="price-items">
        <view class="price-item" wx:if="{{suggestedPrice !== '--'}}">
          <text class="price-label">å…¥åœºä»·</text>
          <text class="price-value blue">{{suggestedPrice}}</text>
        </view>
        <view class="price-item" wx:if="{{stopLoss !== '--'}}">
          <text class="price-label">æ­¢æŸä»·</text>
          <text class="price-value red">{{stopLoss}}</text>
        </view>
        <view class="price-item" wx:if="{{takeProfit !== '--'}}">
          <text class="price-label">æ­¢ç›ˆä»·</text>
          <text class="price-value green">{{takeProfit}}</text>
        </view>
      </view>
    </view>

    <!-- åˆ†æç†ç”±å¡ç‰‡ -->
    <view class="reasoning-card">
      <view class="card-title">
        <text class="title-icon">ğŸ’¡</text>
        <text class="title-text">åˆ†æç†ç”±</text>
      </view>
      <view class="card-content">
        <text class="content-text">{{reasoning}}</text>
      </view>
    </view>

    <!-- æŒä»“åˆ†æå¡ç‰‡ -->
    <view class="position-card">
      <view class="card-title">
        <text class="title-icon">ğŸ“</text>
        <text class="title-text">æŒä»“åˆ†æ</text>
      </view>
      <view class="card-content">
        <text class="content-text">{{positionAnalysis}}</text>
      </view>
    </view>
  </scroll-view>
</view>
