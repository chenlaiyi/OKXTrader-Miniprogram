<!--pages/index/index.wxml-->
<view class="container">
  <!-- 标题栏 -->
  <view class="header">
    <text class="title">OKly</text>
    <text class="subtitle">v1.0.0</text>
  </view>

  <!-- 行情列表 -->
  <view class="market-section">
    <!-- 列表头 -->
    <view class="list-header">
      <text class="header-col">交易对</text>
      <text class="header-col">最新价</text>
      <text class="header-col">24h涨跌</text>
    </view>

    <view class="divider"></view>

    <!-- 行情列表 -->
    <scroll-view class="market-list" scroll-y>
      <view
        class="market-row {{item.instId === selectedPair ? 'selected' : ''}}"
        wx:for="{{markets}}"
        wx:key="instId"
        bindtap="selectPair"
        data-pair="{{item}}"
      >
        <view class="row-col pair-name">
          <text class="pair-ccy">{{item.baseCcy}}</text>
          <text class="quote-ccy">{{item.quoteCcy}}</text>
        </view>
        <view class="row-col price">
          <text class="price-text">{{item.last || '--'}}</text>
        </view>
        <view class="row-col change">
          <text class="change-text {{item.changeClass}}">{{item.changeDisplay || '--'}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 当前选中交易对 -->
  <view class="pair-detail" wx:if="{{selectedPair}}">
    <view class="pair-info">
      <text class="pair-title">{{selectedPair.baseCcy}}/{{selectedPair.quoteCcy}}</text>
      <view class="price-section">
        <text class="current-price {{tickerChangeClass}}">{{currentPrice}}</text>
        <view class="price-change">
          <text class="change-value {{tickerChangeClass}}">{{priceChange}}</text>
          <text class="change-percent {{tickerChangeClass}}">{{priceChangePercent}}%</text>
        </view>
      </view>
    </view>

    <view class="divider"></view>

    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-label">24h 最高</text>
        <text class="stat-value">{{high24h}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">24h 最低</text>
        <text class="stat-value">{{low24h}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">24h 成交量</text>
        <text class="stat-value">{{volume24h}}</text>
      </view>
    </view>
  </view>

  <!-- 账号信息 -->
  <view class="account-section">
    <view class="section-header">
      <text class="section-title">账号</text>
      <view class="status-badge {{isConnected ? 'connected' : ''}}">
        <view class="status-dot"></view>
        <text class="status-text">{{statusMessage}}</text>
      </view>
    </view>

    <view class="account-info">
      <text class="account-name">{{currentAccount.name || '未选择'}}</text>
      <text class="account-type">{{isDemo ? '模拟盘' : '实盘'}}</text>
    </view>
  </view>
</view>
