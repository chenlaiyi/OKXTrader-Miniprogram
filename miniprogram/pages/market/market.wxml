<!--pages/market/market.wxml-->
<view class="container">
  <!-- 标题栏 -->
  <view class="header">
    <text class="title">行情</text>
    <button class="refresh-btn" bindtap="onRefresh">
      <text class="refresh-icon">↻</text>
    </button>
  </view>

  <!-- 行情列表 -->
  <view class="market-section">
    <!-- 列表头 -->
    <view class="list-header">
      <text class="header-col">交易对</text>
      <text class="header-col">最新价</text>
      <text class="header-col">24h涨跌</text>
    </view>

    <view class="divider"></view>

    <!-- 行情列表 -->
    <scroll-view class="market-list" scroll-y refresher-enabled refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh">
      <view
        class="market-row {{item.instId === selectedPair ? 'selected' : ''}}"
        wx:for="{{filteredMarkets}}"
        wx:key="instId"
        bindtap="selectPair"
        data-pair="{{item}}"
      >
        <view class="row-col pair-name">
          <text class="pair-ccy">{{item.baseCcy}}</text>
          <text class="quote-ccy">{{item.quoteCcy}}</text>
        </view>
        <view class="row-col price">
          <text class="price-text">{{item.last || '--'}}</text>
        </view>
        <view class="row-col change">
          <text class="change-text {{item.changeClass}}">{{item.changeDisplay || '--'}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{filteredMarkets.length === 0}}">
    <text class="empty-text">暂无行情数据</text>
  </view>
</view>
