<!-- OKXè´¦å·åˆ—è¡¨é¡µé¢ -->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="nav-bar">
    <text class="title">è´¦å·ç®¡ç†</text>
  </view>

  <!-- è´¦å·åˆ—è¡¨ -->
  <scroll-view class="account-list" scroll-y refresher-enabled refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh">
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{accounts.length === 0}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— è´¦å·</text>
      <text class="empty-desc">è¯·æ·»åŠ æ‚¨çš„OKX APIè´¦å·</text>
    </view>

    <!-- è´¦å·å¡ç‰‡åˆ—è¡¨ -->
    <view class="account-cards" wx:if="{{accounts.length > 0}}">
      <view
        class="account-card {{item.isActive ? '' : 'inactive'}} {{item.isDefault ? 'default' : ''}}"
        wx:for="{{accounts}}"
        wx:key="id"
      >
        <!-- è´¦å·å¤´éƒ¨ -->
        <view class="card-header">
          <view class="account-info">
            <image class="account-icon" src="/images/okx-icon.png" mode="aspectFit"></image>
            <view class="account-details">
              <view class="account-name-row">
                <text class="account-name">{{item.accountName}}</text>
                <view class="badge default" wx:if="{{item.isDefault}}">
                  <text class="badge-text">é»˜è®¤</text>
                </view>
              </view>
              <view class="account-label" wx:if="{{item.label}}">
                <text>{{item.label}}</text>
              </view>
            </view>
          </view>

          <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
          <view class="status-indicator {{item.isActive ? 'active' : 'inactive'}}">
            <text class="status-dot"></text>
          </view>
        </view>

        <!-- è´¦å·ç»Ÿè®¡ -->
        <view class="card-stats">
          <view class="stat-item">
            <text class="stat-value stat-number">{{item.balance || '0.00'}}</text>
            <text class="stat-label">ä½™é¢(USDT)</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value stat-number">{{item.totalTrades || 0}}</text>
            <text class="stat-label">äº¤æ˜“æ¬¡æ•°</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value stat-number {{item.totalPnl >= 0 ? 'profit' : 'loss'}}">
              {{item.totalPnl >= 0 ? '+' : ''}}{{item.totalPnl || '0.00'}}
            </text>
            <text class="stat-label">æ€»ç›ˆäº</text>
          </view>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="card-actions">
          <button
            class="action-btn default"
            wx:if="{{!item.isDefault}}"
            catchtap="onSetDefault"
            data-id="{{item.id}}"
            disabled="{{settingDefault}}"
          >
            {{settingDefault ? 'è®¾ç½®ä¸­...' : 'è®¾ä¸ºé»˜è®¤'}}
          </button>

          <button
            class="action-btn edit"
            catchtap="onEditAccount"
            data-account="{{item}}"
          >
            ç¼–è¾‘
          </button>

          <button
            class="action-btn {{item.isActive ? 'disable' : 'enable'}}"
            catchtap="onToggleActive"
            data-id="{{item.id}}"
            data-active="{{item.isActive}}"
          >
            {{item.isActive ? 'ç¦ç”¨' : 'å¯ç”¨'}}
          </button>

          <button
            class="action-btn delete"
            catchtap="onDelete"
            data-id="{{item.id}}"
            wx:if="{{!item.isDefault}}"
          >
            åˆ é™¤
          </button>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- æ·»åŠ è´¦å·æŒ‰é’® -->
  <view class="add-account-section">
    <button class="add-account-btn" bindtap="onAddAccount">
      <text class="add-icon">+</text>
      <text class="add-text">æ·»åŠ è´¦å·</text>
    </button>
  </view>
</view>
